# 実装計画

- [ ] 1. バックエンドのデータモデルとマイグレーション設定
  - GORMのUserとFavoriteモデルを定義
  - AutoMigrate機能でデータベーステーブルを自動作成
  - 複合ユニークインデックスの設定
  - _要件: 4.2, 4.3_

- [ ] 2. Auth0トークン検証ミドルウェアの実装
  - JWTトークンの検証機能を実装
  - Auth0 subからユーザーIDを取得する機能を実装
  - 認証エラー時の適切なレスポンス処理
  - _要件: 4.1, 4.4, 4.5_

- [ ] 3. ユーザー管理APIエンドポイントの実装
  - POST /v1/users エンドポイントを実装
  - Auth0 subによるユーザー作成/取得ロジック
  - 既存ユーザーの識別処理
  - _要件: 4.1, 4.2_

- [ ] 4. お気に入り管理APIエンドポイントの実装
- [ ] 4.1 お気に入り追加APIの実装
  - POST /v1/favorites エンドポイントを実装
  - 認証チェックとユーザー分離を実装
  - 重複チェックとエラーハンドリング
  - _要件: 1.2, 1.3, 1.4_

- [ ] 4.2 お気に入り削除APIの実装
  - DELETE /v1/favorites/:favoriteId エンドポイントを実装
  - 削除権限チェック（自分のお気に入りのみ削除可能）
  - 削除成功/失敗のレスポンス処理
  - _要件: 2.2, 2.3, 2.4_

- [ ] 4.3 お気に入り一覧取得APIの実装
  - GET /v1/favorites エンドポイントを実装
  - ユーザー固有のお気に入りリスト取得
  - メニュー情報との結合処理
  - _要件: 3.2, 3.3_

- [ ] 4.4 お気に入り状態確認APIの実装
  - GET /v1/favorites/check/:menuId エンドポイントを実装
  - 特定メニューのお気に入り状態確認
  - 認証ユーザーのお気に入り状態のみ返却
  - _要件: 1.1, 1.5_

- [ ] 5. フロントエンドのお気に入りサービス実装
  - useFavoriteService.ts コンポーザブルを作成
  - Auth0トークンを使用したAPI通信機能
  - エラーハンドリングとレスポンス処理
  - _要件: 1.4, 2.4_

- [ ] 6. Piniaストアでのお気に入り状態管理
  - favorite.ts ストアを作成
  - お気に入りリストの状態管理
  - お気に入り状態のキャッシュ機能
  - _要件: 1.3, 2.3, 3.3_

- [ ] 7. FavoriteButtonコンポーネントの実装
  - 再利用可能なお気に入りボタンコンポーネントを作成
  - お気に入り状態の視覚的表示（ハートアイコン）
  - クリック時のお気に入り追加/削除処理
  - ローディング状態の表示
  - _要件: 1.1, 1.2, 1.3, 2.1, 2.2, 2.3_

- [ ] 8. 既存ページへのお気に入りボタン統合
- [ ] 8.1 ホームページ（index.vue）への統合
  - メニューアイテム表示部分にFavoriteButtonを追加
  - 認証状態に応じたボタン表示制御
  - _要件: 1.1, 1.5_

- [ ] 8.2 メニューリストページ（menuList.vue）への統合
  - メニューリスト表示部分にFavoriteButtonを追加
  - 認証状態に応じたボタン表示制御
  - _要件: 1.1, 1.5_

- [ ] 9. お気に入りページの実装
  - pages/favorites.vue ページを作成
  - お気に入りメニューリストの表示
  - 空のお気に入りリスト時のメッセージ表示
  - 各アイテムからのお気に入り削除機能
  - _要件: 3.1, 3.2, 3.3, 3.4, 3.5_

- [ ] 10. ナビゲーションメニューの更新
  - TheHeader.vueにお気に入りページへのリンクを追加
  - 認証済みユーザーのみ表示するよう制御
  - _要件: 3.1, 3.5_

- [ ] 11. エラーハンドリングとユーザーフィードバック
  - 認証エラー時のログインページリダイレクト
  - ネットワークエラー時のエラーメッセージ表示
  - 成功/失敗時の適切なフィードバック表示
  - _要件: 1.4, 2.4, 3.5_

- [ ] 12. 統合テストの実装
  - お気に入り追加/削除フローのテスト
  - お気に入りページ表示のテスト
  - 認証チェックのテスト
  - _要件: 全要件の検証_
